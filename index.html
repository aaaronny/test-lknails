<!DOCTYPE html>
<html lang="it" ng-controller="MainController as ctrl" id="lkapp">
    <head>
        <meta charset="utf-8">
        <title>LK Nails & Beauty</title>

        <link href="data:image/png;base64,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" rel="icon" type="image/x-icon" />

        <script src="https://cdnjs.cloudflare.com/ajax/libs/onsen/2.10.6/js/onsenui.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/onsen/2.10.6/css/onsenui.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/onsen/2.10.6/css/onsen-css-components.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular-route.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/onsen/2.10.6/js/angular-onsenui.min.js"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"> 

        <link href='https://fullcalendar.io/releases/core/4.2.0/main.min.css' rel='stylesheet' />
        <link href='https://fullcalendar.io/releases/daygrid/4.2.0/main.min.css' rel='stylesheet' />
        <link href='https://fullcalendar.io/releases/timegrid/4.2.0/main.min.css' rel='stylesheet' />

        <script src='https://fullcalendar.io/releases/core/4.2.0/main.min.js'></script>
        <script src='https://fullcalendar.io/releases/daygrid/4.2.0/main.min.js'></script>
        <script src='https://fullcalendar.io/releases/interaction/4.2.0/main.min.js'></script>
        <script src='https://fullcalendar.io/releases/timegrid/4.2.0/main.min.js'></script>

        <style>

            .fc-toolbar{
                display: none !important;
            }

            .fc-day-header{
                background-color: lightblue !important;
            }

            .fc-sun, .fc-sat {
                background-color: #fee;
            }

        </style>

    </head>
    <body>
        <ons-navigator var="nav" page="home.html">
        </ons-navigator>

        <template id="home.html">
            <ons-page>
                <ons-toolbar>
                    <div class="center">
                        LK Nails & Beauty
                    </div>
                </ons-toolbar>

                <ons-tabbar swipeable position="auto" ons-prechange="namePage($event)">
                    <ons-tab page="appuntamenti.html" label="Home" icon="fa-home" active>
                    </ons-tab>
                    <ons-tab page="anagrafica.html" label="Anagrafica" icon="fa-address-book">
                    </ons-tab>
                    <ons-tab page="trattamenti.html" label="Trattamenti" icon="fa-umbrella-beach">
                    </ons-tab>
                </ons-tabbar>
            </ons-page>
        </template>

        <template id="appuntamenti.html">
            <ons-page id="main" style="text-align: center;">
                <ons-toolbar>
                    <div class="left">
                        <ons-button modifier="quiet" onclick="fc_nav(-1)" icon="fa-arrow-circle-left"></ons-button>&nbsp;
                        <ons-button modifier="quiet" onclick="fc_nav(0)" icon="fa-calendar-check" style="color: green"></ons-button>&nbsp;
                        <ons-button modifier="quiet" onclick="fc_nav(1)" icon="fa-arrow-circle-right"></ons-button>
                    </div>
                    <div class="center">
                        <span id="dayInfoFc"></span>
                    </div>
                    <div class="right">
                        <ons-button modifier="quiet" onclick="fc_view('timeGridDay')" icon="fa-calendar-day" style="color: orange"></ons-button>&nbsp;
                        <ons-button modifier="quiet" onclick="fc_view('timeGridWeek')" icon="fa-calendar-week" style="color: red"></ons-button>&nbsp;
                        <ons-button modifier="quiet" onclick="fc_view('dayGridMonth')" icon="fa-calendar-alt" style="color: brown"></ons-button>&nbsp;
                    </div>
                </ons-toolbar>
                <ons-card>
                    <div class="content">
                        <div id="calendar"></div>

                        <script>

                            var api='XUImABxDE9BJK7bPyOXC6A0REfwZ0vVg';
                            var calendarEl = document.getElementById('calendar');
                            var calendar = new FullCalendar.Calendar(calendarEl, {
                                plugins: [ 'interaction', 'dayGrid', 'timeGrid' ],
                                defaultView: 'timeGridDay',
                                header: {
                                    left: 'prev,next today',
                                    center: 'title',
                                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                                },
                                height: 'auto',
                                minTime: '07:00:00',
                                maxTime: '22:00:00',
                                allDaySlot: false,
                                firstDay: 1,

                                eventSources: [

                                    {
                                        url: makeUri('eventi', null),
                                        method: 'GET',
                                        failure: function() {
                                            alert('there was an error while fetching events!');
                                        }
                                    }
                                ]

                            });

                            calendar.setOption('locale', 'it');
                            calendar.render();
                            renderDay();

                            function makeUri(path, query){
                                query = (query==null) ? '' : ((query != '') ? '&' + query : '');
                                return 'https://api.mlab.com/api/1/databases/heroku_s4qtgnv8/collections/' + path + '?apiKey=' + api + query;
                            }

                            function clicca(item){
                                document.getElementsByClassName(item)[0].click();
                                var dt = document.getElementsByClassName('fc-day-header')[0].innerHTML;
                                dt += ', ' + document.getElementsByClassName('fc-toolbar')[0].getElementsByClassName('fc-center')[0].getElementsByTagName('h2')[0].innerHTML;
                                document.getElementById('subt').innerHTML = dt;
                            }

                            function fc_nav(val){
                                if (val==-1){
                                    calendar.prev();
                                } else if (val==1){
                                    calendar.next();
                                } else {
                                    calendar.today();
                                }
                                renderDay();
                            }

                            function fc_view(val){
                                calendar.changeView(val);
                                renderDay();
                            }

                            function viewNote(idn){
                                angular.element(document.getElementById('lkapp')).scope().loadNota(idn);
                            }

                            function renderDay(){
                                var dt = document.getElementsByClassName('fc-day-header')[0].innerHTML;
                                dt += ', ' + document.getElementsByClassName('fc-toolbar')[0].getElementsByClassName('fc-center')[0].getElementsByTagName('h2')[0].innerHTML;
                                document.getElementById('dayInfoFc').innerHTML = dt;
                            }

                        </script>
                    </div>
                </ons-card>
            </ons-page>
        </template>

        <template id="anagrafica.html">
            <ons-page id="about" style="text-align: center;" ons-show="ctrl.loadAnagrafica()">
                <ons-toolbar>
                    <div class="center">
                        <div style="text-align: center; margin: 7px;">
                            <ons-search-input style="height: 100%; width: 100%; text-align: center" placeholder="Cerca Cliente" ng-change="ctrl.filterAnag(cliFind)" ng-model="cliFind"></ons-search-input>
                        </div>
                    </div>
                </ons-toolbar>
                <ons-progress-circular indeterminate ng-show="progressNotif"></ons-progress-circular>
                <ons-list>
                    <ons-list-item ng-repeat="n in listaAnag">
                        <div class="left"><ons-icon icon="fa-user-tie" size="20px"></ons-icon></div>
                        <div class="center">{{n.nome}} {{n.cognome}}</div>
                    </ons-list-item>
                </ons-list>
            </ons-page>
        </template>

        <template id="trattamenti.html">
            <ons-page id="about" style="text-align: center;" ons-show="ctrl.loadTrattamenti()">
                <ons-toolbar>
                    <div class="center">
                        <div style="text-align: center; margin: 7px;">
                            <ons-search-input style="height: 100%; width: 100%; text-align: center" placeholder="Cerca Cliente" ng-change="ctrl.filterTratt(tratFind)" ng-model="tratFind"></ons-search-input>
                        </div>
                    </div>
                </ons-toolbar>
                <ons-progress-circular indeterminate ng-show="progressNotif"></ons-progress-circular>
                <ons-list>
                    <ons-list-item ng-repeat="t in listaTratt" expandable>
                        <div class="left"><ons-icon icon="fa-allergies" size="20px"></ons-icon></div>
                        <div class="center">{{t.descrizione}}</div>
                        <div class="expandable-content">
                                <ons-icon icon="fa-hourglass-half"></ons-icon><span> {{t.minuti}} min</span> - 
                                <ons-icon icon="fa-cash-register"></ons-icon><span> {{t.prezzo}} </span><ons-icon icon="fa-euro-sign"></ons-icon>

                        </div>
                        <div class="right">todel</div>
                    </ons-list-item>
                </ons-list>
            </ons-page>
        </template>

        <template id="about.html">
            <ons-page id="about" style="text-align: center;">
                <div style="text-align: center; padding: 10px;">
                    <h3>INSTAGRAM BOT</h3>
                    <p>Sviluppato da AAAR IT Solutions<br/>
                        <a href="mailto:aaaronny.studio@gmail.com">contatta lo sviluppatore</a>
                    </p>
                </div>
            </ons-page>
        </template>

        <template id="cli-manager.html">
            <ons-page>
                <ons-toolbar>
                    <div class="left">
                        <ons-back-button></ons-back-button>
                    </div>
                    <div class="center">
                        LK Nails & Beauty
                    </div>
                </ons-toolbar>
                <ons-list>
                    <ons-list-title><h2 style="text-align: center;"><span ng-if="fakeCli.ngact == 'PUT'">MODIFICA </span> 
                        <span ng-if="fakeCli.ngact == 'POST'">AGGIUNGI </span> 
                        CLIENTE</h2></ons-list-title>
                </ons-list>
                <div style="margin: 10px; padding: 10px;">
                    <ons-row style="margin: 10px;">
                        <ons-col>Username</ons-col>
                        <ons-col>
                            <ons-input id="username" modifier="underbar" placeholder="Username" float ng-model="fakeCli.username" ng-readonly="fakeCli.ngact == 'PUT'"></ons-input>
                        </ons-col>
                    </ons-row>
                    <ons-row style="margin: 10px;">
                        <ons-col>Password</ons-col>
                        <ons-col><ons-input id="username" modifier="underbar" placeholder="Password" float ng-model="fakeCli.password"></ons-input>
                        </ons-col>
                    </ons-row>
                </div>
                <p style="text-align: center;">
                    <ons-button style="display: inline-block;  max-width: 350px; margin:10px;" modifier="large" ng-if="fakeCli.ngact == 'PUT'" ng-click="saveCliente('PUT')" icon="fa-save"> SALVA</ons-button>
                    <ons-button style="display: inline-block;  max-width: 350px; margin:10px;" modifier="large" ng-if="fakeCli.ngact == 'POST'" ng-click="saveCliente('POST')" icon="fa-save"> SALVA</ons-button>
                </p>
            </ons-page>
        </template>

        <template id="view-nota.html">
            <ons-page>
                <ons-toolbar>
                    <div class="left">
                        <ons-back-button></ons-back-button>
                    </div>
                    <div class="center">
                        LK Nails & Beauty
                    </div>
                </ons-toolbar>
                <div style="text-align: center">
                    <ons-card>
                        <div class="title">
                            <ons-row>
                                <ons-col><div style="text-align: left;">Cliente: {{nota.cliente}}</div></ons-col>
                                <ons-col><div style="text-align: right;"><span>Totale: {{nota.prezzo}} </span><ons-icon icon="fa-euro-sign"></ons-icon></div></ons-col>
                            </ons-row>
                        </div>
                        <div class="content">
                            <ons-list>
                                <ons-list-item ng-repeat="t in ntratt">
                                    <div class="left"><ons-icon icon="fa-allergies" size="20px"></ons-icon></div>
                                    <div class="center">{{t}}</div>
                                </ons-list-item>
                            </ons-list>
                        </div>
                    </ons-card>
                </div>
            </ons-page>
        </template>

        <script>

            ons.bootstrap()
                .controller('MainController', function($scope, $http) {

                $scope.progressNotif = true;

                // tracker pagina attiva
                $scope.namePage = function($event) {
                    $scope.thisPage = angular.element($event.tabItem).attr('label');
                };

                $scope.fakeCli = null;

                $scope.showEditCli = function(uu,pp,rr,ss, met){
                    $scope.fakeCli = {
                        username: uu,
                        password: pp,
                        action: rr.split('/')[0].split('-')[2],
                        param: rr.split('/')[1],
                        status: (ss == 'A'),
                        ngact: met
                    };
                    $scope.nav.pushPage('cli-manager.html');
                }

                // ajax per recupero note appuntamento
                $scope.loadNota = function(idNota){
                    $scope.progressNotif = true;
                    var uu = makeUri('note/' + idNota, null);
                    console.log('URL: ' + uu);
                    $http(
                        {
                            method : "GET",
                            url : uu
                        }
                    ).then(
                        function mySuccess(response) {
                            console.log(response);
                            $scope.nota = response.data;
                            var t = response.data.trattamenti.split(";");
                            var nt = Array();
                            for (var i=0; i<t.length-1; ++i)
                                nt.push(t[i]);
                            $scope.ntratt = nt;
                            $scope.nav.pushPage('view-nota.html');
                        }
                    );
                }

                // ajax per recupero note appuntamento
                this.loadAnagrafica = function(){
                    $scope.progressNotif = true;
                    var uu = makeUri('clienti', null);
                    console.log('URL: ' + uu);
                    $http(
                        {
                            method : "GET",
                            url : uu
                        }
                    ).then(
                        function mySuccess(response) {
                            console.log(response);
                            $scope.listaAnag = response.data;
                            $scope.BEanagAll = response.data;
                            $scope.progressNotif = false;
                        }
                    );
                }

                // ajax per recupero note appuntamento
                this.loadTrattamenti = function(){
                    $scope.progressNotif = true;
                    var uu = makeUri('trattamenti', null);
                    console.log('URL: ' + uu);
                    $http(
                        {
                            method : "GET",
                            url : uu
                        }
                    ).then(
                        function mySuccess(response) {
                            console.log(response);
                            $scope.listaTratt = response.data;
                            $scope.BEtrattAll = response.data;
                            $scope.progressNotif = false;
                        }
                    );
                }

                // ajax per recupero clienti
                function loadsClienti(){
                    $scope.progressNotif = true;
                    $http(
                        {
                            method : "GET",
                            url : '/json/Clienti'
                        }
                    ).then(
                        function mySuccess(response) {
                            $scope.clienti = response.data;
                            $scope.progressNotif = false;
                        }
                    );
                }

                // ajax per salvataggio info cliente
                $scope.saveCliente = function(met){
                    $http(
                        {
                            method : met,
                            url : '/json/Clienti',
                            data : {
                                username: $scope.fakeCli.username,
                                password: $scope.fakeCli.password,
                                status: ($scope.fakeCli.status) ? 'A' : 'D',
                                param: 'follow-by-' + $scope.fakeCli.action + '/' + $scope.fakeCli.param
                            }
                        }
                    ).then(
                        function mySuccess(response) {
                            document.location.reload();
                        }
                    );
                }

                // ajax per action generica (follow, unfollow, stop)
                $scope.doAct = function(act){
                    $http(
                        {
                            method : 'GET',
                            url : '/' + act,
                        }
                    ).then(
                        function mySuccess(response) {
                            document.location.reload();
                        }
                    );
                }

                this.filterAnag = function(query){
                    console.log(query);
                    var q = query.toUpperCase().trim();
                    var a = $scope.BEanagAll;
                    var r = Array();
                    for (var i=0; i<a.length; ++i){
                        var x = a[i];
                        var nc = x.nome.toUpperCase() + ' ' + x.cognome.toUpperCase();
                        var cn = x.cognome.toUpperCase() + ' ' + x.nome.toUpperCase();
                        var t1 = nc.toUpperCase().match(q);
                        var t2 = cn.toUpperCase().match(q);
                        if ((t1 != null) || (t2 != null))
                            r.push(x);
                    }
                    $scope.anag = r;
                }

            });

        </script>

    </body>
</html>
